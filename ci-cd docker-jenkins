pipeline {
    agent any
    tools{
        maven 'maven_3_5_0'
    }
    Stages{
         Stage('build maven'){
            Steps{
                checkout([git 'https://github.com/Anandb007/jenkins-docker.git'])
                sh 'mvn clean install'
            }
        }
stage('build docker image'){
      steps{
        script{
            sh 'docker build -t aliasname/imagename .'
        }
      }

    }
    stage('push image to hub'){
        step{
            script{
                withCredential([string(credentialsId: 'dockerhub-pwd', varibale: 'dockerhubpwd')]) {
                sh ' docker login -u username -p ${variable}'

                }
                sh 'docker push aliasname/iamgename'
            }
        }
    }
  }
}
